{"version":3,"file":"52.js","sources":["webpack:///app/components/InitError.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { connect } from \"alt-react\";\r\nimport BlockchainStore from \"stores/BlockchainStore\";\r\nimport SettingsStore from \"stores/SettingsStore\";\r\nimport Translate from \"react-translate-component\";\r\nimport WebsocketAddModal from \"./Settings/WebsocketAddModal\";\r\nimport SettingsActions from \"actions/SettingsActions\";\r\nimport {Apis} from \"seerjs-ws\";\r\nimport counterpart from \"counterpart\";\r\n\r\nclass InitError extends React.Component {\r\n\r\n    triggerModal(e) {\r\n        this.refs.ws_modal.show(e);\r\n    }\r\n\r\n    onChangeWS(e) {\r\n        SettingsActions.changeSetting({setting: \"apiServer\", value: e.target.value });\r\n        Apis.reset(e.target.value, true);\r\n    }\r\n\r\n    onReloadClick(e) {\r\n        if (e) {\r\n            e.preventDefault();\r\n        }\r\n        if (window.electron) {\r\n            window.location.hash = \"\";\r\n            window.remote.getCurrentWindow().reload();\r\n        }\r\n        else window.location.href = __BASE_URL__;\r\n    }\r\n\r\n    onReset() {\r\n        SettingsActions.changeSetting({setting: \"apiServer\", value: this.props.defaultConnection });\r\n        SettingsActions.clearSettings();\r\n    }\r\n\r\n    render() {\r\n        let options = this.props.apis.map(entry => {\r\n            let onlyDescription = entry.url.indexOf(\"fake.automatic-selection\") !== -1;\r\n            let {location} = entry;\r\n            if (location && typeof location === \"object\" && \"translate\" in location) location = counterpart.translate(location.translate);\r\n\r\n            return <option key={entry.url} value={entry.url}>{location || entry.url} {!onlyDescription && location ? `(${entry.url})` : null}</option>;\r\n        });\r\n\r\n        return (\r\n            <div className=\"grid-block page-layout\">\r\n                <div className=\"grid-container\">\r\n                    <div className=\"grid-content no-overflow\">\r\n                        <br/>\r\n                        <Translate component=\"h3\" content={`init_error.title`} />\r\n                        <br/>\r\n                        <section className=\"block-list\">\r\n                            <header><Translate component=\"span\" content={`settings.apiServer`} /></header>\r\n                            <ul>\r\n                                <li className=\"with-dropdown\">\r\n\r\n                                    <select onChange={this.onChangeWS.bind(this)} value={this.props.apiServer}>\r\n                                        {options}\r\n                                    </select>\r\n\r\n                                    <div style={{paddingTop: 10}} className=\"button-group\">\r\n                                        <div\r\n                                            onClick={this.triggerModal.bind(this)}\r\n                                            className=\"button outline\"\r\n                                            id=\"add\"\r\n                                        >\r\n                                                <Translate id=\"add_text\" content=\"settings.add_api\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </li>\r\n                                <li className=\"key-value clearfix\">\r\n                                    <div className=\"float-left\"><Translate content=\"init_error.ws_status\" /></div>\r\n                                    <div className=\"float-right\">\r\n                                        {this.props.rpc_connection_status === \"open\" ? <span className=\"txtlabel success\"><Translate content={`init_error.connected`} /></span> : <span className=\"txtlabel warning\"><Translate content={`init_error.not_connected`} /></span>}\r\n                                    </div>\r\n                                </li>\r\n                            </ul>\r\n                        </section>\r\n                        <br/>\r\n                        <div className=\"button-group\">\r\n                            <div className=\"button outline\" href onClick={this.onReloadClick}><Translate content={`init_error.retry`} /></div>\r\n\r\n                            <div onClick={this.onReset.bind(this)} className=\"button outline\">\r\n                                <Translate content=\"settings.reset\" />\r\n                            </div>\r\n                        </div>\r\n                        <WebsocketAddModal ref=\"ws_modal\" apis={this.props.apis} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(InitError, {\r\n    listenTo() {\r\n        return [BlockchainStore, SettingsStore];\r\n    },\r\n    getProps() {\r\n        return {\r\n            rpc_connection_status: BlockchainStore.getState().rpc_connection_status,\r\n            apis: SettingsStore.getState().defaults.apiServer,\r\n            apiServer: SettingsStore.getState().settings.get(\"apiServer\"),\r\n            defaultConnection: SettingsStore.getState().defaultSettings.get(\"apiServer\"),\r\n        };\r\n    }\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// app/components/InitError.jsx"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AADA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AADA;AAIA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAKA;AALA;AADA;AANA;AAgBA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAFA;AAjBA;AAFA;AA2BA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AADA;AAHA;AAOA;AAvCA;AADA;AADA;AA8CA;;;;AAnFA;AACA;AAqFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AAXA;;;;A","sourceRoot":""}